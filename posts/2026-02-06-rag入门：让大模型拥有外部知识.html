<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RAGå…¥é—¨ï¼šè®©å¤§æ¨¡å‹æ‹¥æœ‰å¤–éƒ¨çŸ¥è¯† - TechBlog</title>
    <meta name="description" content="è¯¦è§£æ£€ç´¢å¢å¼ºç”Ÿæˆ(RAG)æŠ€æœ¯åŸç†ã€ç³»ç»Ÿæ¶æ„å’Œå®Œæ•´å®ç°ï¼Œé€šè¿‡ä¼ä¸šçŸ¥è¯†åº“é—®ç­”æ¡ˆä¾‹ï¼Œå­¦ä¹ å¦‚ä½•è®©å¤§è¯­è¨€æ¨¡å‹è®¿é—®å’Œåˆ©ç”¨å¤–éƒ¨çŸ¥è¯†ã€‚">
    <link rel="stylesheet" href="/css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- å¯¼èˆªæ  -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="/index.html" class="nav-logo">
                <span class="logo-icon">&lt;/&gt;</span>
                <span class="logo-text">TechBlog</span>
            </a>
            <ul class="nav-menu">
                <li><a href="/index.html" class="nav-link">é¦–é¡µ</a></li>
                <li><a href="/posts.html" class="nav-link">æ–‡ç« </a></li>
                <li><a href="/about.html" class="nav-link">å…³äº</a></li>
                <li><a href="/contact.html" class="nav-link">è”ç³»</a></li>
            </ul>
            <div class="nav-actions">
                <button class="theme-toggle" id="themeToggle"><i class="fas fa-moon"></i></button>
                <button class="mobile-menu-toggle" id="mobileMenuToggle"><i class="fas fa-bars"></i></button>
            </div>
        </div>
    </nav>

    <article>
        <header class="article-header">
            <div class="container">
                <div class="article-meta">
                    <div class="post-tags"><span class="tag">RAG</span><span class="tag">LLM</span><span class="tag">å‘é‡æ•°æ®åº“</span><span class="tag">LangChain</span></div>
                    <span class="read-time"><i class="far fa-clock"></i> 20 åˆ†é’Ÿé˜…è¯»</span>
                </div>
                <h1 class="article-title">RAGå…¥é—¨ï¼šè®©å¤§æ¨¡å‹æ‹¥æœ‰å¤–éƒ¨çŸ¥è¯†</h1>
                <div class="post-meta" style="justify-content: flex-start; gap: 2rem;">
                    <div class="author">
                        <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100&h=100&fit=crop" alt="ä½œè€…" class="author-avatar">
                        <div>
                            <span class="author-name">å°æ¬§Jacory</span><br>
                            <span style="font-size: 0.875rem; color: var(--text-muted);">å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆ</span>
                        </div>
                    </div>
                    <span class="post-date">2026/2/6 Â· é˜…è¯»é‡ 2158</span>
                </div>
            </div>
        </header>

        <div class="container">
        </div>

        <div class="article-content">
            <h2>ç›®å½•</h2>
<ul>
<li><a href="#%E4%BB%80%E4%B9%88%E6%98%AFrag">ä»€ä¹ˆæ˜¯RAG</a></li>
<li><a href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81rag">ä¸ºä»€ä¹ˆéœ€è¦RAG</a></li>
<li><a href="#rag%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86">RAGå·¥ä½œåŸç†</a></li>
<li><a href="#%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1">ç³»ç»Ÿæ¶æ„è®¾è®¡</a></li>
<li><a href="#%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87">ç¯å¢ƒå‡†å¤‡</a></li>
<li><a href="#%E5%AE%9E%E6%93%8D%E6%A1%88%E4%BE%8B%E4%BC%81%E4%B8%9A%E7%9F%A5%E8%AF%86%E5%BA%93%E9%97%AE%E7%AD%94">å®æ“æ¡ˆä¾‹ï¼šä¼ä¸šçŸ¥è¯†åº“é—®ç­”</a></li>
<li><a href="#%E4%BC%98%E5%8C%96%E6%8A%80%E5%B7%A7">ä¼˜åŒ–æŠ€å·§</a></li>
<li><a href="#%E6%80%BB%E7%BB%93">æ€»ç»“</a></li>
</ul>
<h2>ä»€ä¹ˆæ˜¯RAG</h2>
<p><strong>RAGï¼ˆRetrieval-Augmented Generationï¼Œæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰</strong> æ˜¯ä¸€ç§å°†å¤–éƒ¨çŸ¥è¯†æ£€ç´¢ä¸å¤§è¯­è¨€æ¨¡å‹ç”Ÿæˆèƒ½åŠ›ç›¸ç»“åˆçš„æŠ€æœ¯æ¶æ„ã€‚</p>
<p>ä¼ ç»Ÿçš„å¤§è¯­è¨€æ¨¡å‹ï¼ˆå¦‚GPT-4ã€Claudeç­‰ï¼‰è™½ç„¶å…·å¤‡å¼ºå¤§çš„è¯­è¨€ç†è§£å’Œç”Ÿæˆèƒ½åŠ›ï¼Œä½†å­˜åœ¨ä¸¤ä¸ªæ ¸å¿ƒå±€é™ï¼š</p>
<ol>
<li><strong>çŸ¥è¯†æˆªæ­¢æ—¥æœŸ</strong>ï¼šæ¨¡å‹çš„è®­ç»ƒæ•°æ®æœ‰æ˜ç¡®çš„æ—¶é—´ cutoffï¼Œæ— æ³•è·å–æœ€æ–°ä¿¡æ¯</li>
<li><strong>å¹»è§‰é—®é¢˜</strong>ï¼šæ¨¡å‹å¯èƒ½ä¼šç”Ÿæˆå¬èµ·æ¥åˆç†ä½†å®é™…é”™è¯¯çš„å†…å®¹</li>
</ol>
<p>RAG é€šè¿‡å¼•å…¥å¤–éƒ¨çŸ¥è¯†åº“ï¼Œè®©æ¨¡å‹åœ¨å›ç­”é—®é¢˜å‰å…ˆæ£€ç´¢ç›¸å…³æ–‡æ¡£ï¼ŒåŸºäºæ£€ç´¢åˆ°çš„å‡†ç¡®ä¿¡æ¯æ¥ç”Ÿæˆå›ç­”ï¼Œä»è€Œè§£å†³ä¸Šè¿°é—®é¢˜ã€‚</p>
<h3>RAG çš„æ ¸å¿ƒä»·å€¼</h3>
<table>
<thead>
<tr>
<th>èƒ½åŠ›</th>
<th>ä¼ ç»ŸLLM</th>
<th>RAGå¢å¼º</th>
</tr>
</thead>
<tbody><tr>
<td>æœ€æ–°çŸ¥è¯†</td>
<td>âŒ å—é™äºè®­ç»ƒæ•°æ®</td>
<td>âœ… å¯å®æ—¶æ›´æ–°çŸ¥è¯†åº“</td>
</tr>
<tr>
<td>å‡†ç¡®æ€§</td>
<td>âš ï¸ å¯èƒ½äº§ç”Ÿå¹»è§‰</td>
<td>âœ… åŸºäºæ£€ç´¢äº‹å®ç”Ÿæˆ</td>
</tr>
<tr>
<td>å¯æº¯æº</td>
<td>âŒ æ— æ³•çŸ¥é“æ¥æº</td>
<td>âœ… å¯å±•ç¤ºå‚è€ƒæ–‡æ¡£</td>
</tr>
<tr>
<td>ç§æœ‰åŒ–</td>
<td>âŒ éœ€è¦è®­ç»ƒ</td>
<td>âœ… ç›´æ¥æŒ‚è½½ç§æœ‰æ–‡æ¡£</td>
</tr>
</tbody></table>
<h2>ä¸ºä»€ä¹ˆéœ€è¦RAG</h2>
<h3>åœºæ™¯1ï¼šä¼ä¸šçŸ¥è¯†åº“é—®ç­”</h3>
<p>æƒ³è±¡ä¸€ä¸ªå®¢æœåœºæ™¯ï¼šç”¨æˆ·è¯¢é—®&quot;å…¬å¸2024å¹´çš„é€€è´§æ”¿ç­–æ˜¯ä»€ä¹ˆï¼Ÿ&quot;</p>
<ul>
<li><strong>ä¼ ç»ŸLLM</strong>ï¼šå¯èƒ½åŸºäºè¿‡æ—¶çš„è®­ç»ƒæ•°æ®å›ç­”ï¼Œæˆ–è€…ç¼–é€ æ”¿ç­–</li>
<li><strong>RAGæ–¹æ¡ˆ</strong>ï¼šä»ä¼ä¸šæœ€æ–°çš„æ”¿ç­–æ–‡æ¡£ä¸­æ£€ç´¢å‡†ç¡®ä¿¡æ¯ï¼Œç»™å‡ºæƒå¨å›ç­”</li>
</ul>
<h3>åœºæ™¯2ï¼šåŒ»å­¦æ–‡çŒ®æŸ¥è¯¢</h3>
<p>åŒ»ç”Ÿè¯¢é—®æŸç§ç½•è§ç—…çš„æœ€æ–°æ²»ç–—æ–¹æ¡ˆã€‚</p>
<ul>
<li><strong>ä¼ ç»ŸLLM</strong>ï¼šè®­ç»ƒæ•°æ®å¯èƒ½ä¸åŒ…å«æœ€æ–°åŒ»å­¦ç ”ç©¶</li>
<li><strong>RAGæ–¹æ¡ˆ</strong>ï¼šä»PubMedç­‰æœ€æ–°è®ºæ–‡åº“æ£€ç´¢ç›¸å…³ç ”ç©¶</li>
</ul>
<h3>åœºæ™¯3ï¼šæ³•å¾‹æ³•è§„å’¨è¯¢</h3>
<p>æŸ¥è¯¢æœ€æ–°çš„ç¨æ³•å˜æ›´ã€‚</p>
<ul>
<li><strong>ä¼ ç»ŸLLM</strong>ï¼šæ— æ³•è·çŸ¥æœ€æ–°æ³•å¾‹ä¿®è®¢</li>
<li><strong>RAGæ–¹æ¡ˆ</strong>ï¼šè¿æ¥å®˜æ–¹æ³•å¾‹æ•°æ®åº“ï¼Œæä¾›å‡†ç¡®æ¡æ–‡</li>
</ul>
<h2>RAGå·¥ä½œåŸç†</h2>
<p>RAG ç³»ç»Ÿçš„å·¥ä½œæµç¨‹å¯ä»¥åˆ†ä¸ºä¸‰ä¸ªä¸»è¦é˜¶æ®µï¼š</p>
<h3>é˜¶æ®µ1ï¼šæ–‡æ¡£é¢„å¤„ç†ï¼ˆç¦»çº¿ï¼‰</h3>
<pre><code>åŸå§‹æ–‡æ¡£ â†’ æ–‡æœ¬æå– â†’ æ–‡æœ¬åˆ†å— â†’ å‘é‡åŒ– â†’ å­˜å‚¨åˆ°å‘é‡æ•°æ®åº“
</code></pre>
<ol>
<li><strong>æ–‡æœ¬æå–</strong>ï¼šä»PDFã€Wordã€ç½‘é¡µç­‰æ ¼å¼æå–çº¯æ–‡æœ¬</li>
<li><strong>æ–‡æœ¬åˆ†å—</strong>ï¼šå°†é•¿æ–‡æ¡£åˆ‡åˆ†æˆé€‚å½“å¤§å°çš„æ®µè½ï¼ˆé€šå¸¸500-1000å­—ç¬¦ï¼‰</li>
<li><strong>å‘é‡åŒ–</strong>ï¼šä½¿ç”¨Embeddingæ¨¡å‹å°†æ–‡æœ¬è½¬æ¢ä¸ºå‘é‡</li>
<li><strong>å­˜å‚¨</strong>ï¼šå°†å‘é‡å­˜å…¥å‘é‡æ•°æ®åº“ï¼ˆå¦‚Chromaã€Pineconeã€Milvusï¼‰</li>
</ol>
<h3>é˜¶æ®µ2ï¼šæ£€ç´¢ï¼ˆåœ¨çº¿ï¼‰</h3>
<pre><code>ç”¨æˆ·é—®é¢˜ â†’ å‘é‡åŒ– â†’ ç›¸ä¼¼åº¦æœç´¢ â†’ è¿”å›Top-Kç›¸å…³æ–‡æ¡£
</code></pre>
<ol>
<li>å°†ç”¨æˆ·é—®é¢˜è½¬æ¢ä¸ºå‘é‡</li>
<li>åœ¨å‘é‡æ•°æ®åº“ä¸­è¿›è¡Œç›¸ä¼¼åº¦æœç´¢</li>
<li>è¿”å›æœ€ç›¸å…³çš„Kä¸ªæ–‡æ¡£ç‰‡æ®µ</li>
</ol>
<h3>é˜¶æ®µ3ï¼šç”Ÿæˆï¼ˆåœ¨çº¿ï¼‰</h3>
<pre><code>ç”¨æˆ·é—®é¢˜ + æ£€ç´¢åˆ°çš„æ–‡æ¡£ â†’ æ„å»ºPrompt â†’ LLMç”Ÿæˆå›ç­”
</code></pre>
<p>å°†æ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡ä¸ç”¨æˆ·é—®é¢˜ä¸€èµ·é€å…¥å¤§æ¨¡å‹ï¼Œç”ŸæˆåŸºäºäº‹å®çš„å›ç­”ã€‚</p>
<h2>ç³»ç»Ÿæ¶æ„è®¾è®¡</h2>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ç”¨æˆ·æé—®      â”‚â”€â”€â”€â”€â–¶â”‚   é—®é¢˜å‘é‡åŒ–    â”‚â”€â”€â”€â”€â–¶â”‚  å‘é‡ç›¸ä¼¼åº¦æœç´¢  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                         â”‚
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   å‘é‡æ•°æ®åº“     â”‚
                    â”‚  (ChromaDBç­‰)   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å±•ç¤ºå›ç­”      â”‚â—€â”€â”€â”€â”€â”‚   LLMç”Ÿæˆå›ç­”   â”‚â—€â”€â”€â”€â”€â”‚  æ„å»ºPrompt     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â–²
                               â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   æ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h2>ç¯å¢ƒå‡†å¤‡</h2>
<h3>å®‰è£…ä¾èµ–</h3>
<pre><code class="language-bash">pip install langchain langchain-openai chromadb python-dotenv
</code></pre>
<h3>é…ç½®APIå¯†é’¥</h3>
<p>åˆ›å»º <code>.env</code> æ–‡ä»¶ï¼š</p>
<pre><code class="language-bash">OPENAI_API_KEY=your_openai_api_key_here
</code></pre>
<h3>å‡†å¤‡æµ‹è¯•æ–‡æ¡£</h3>
<p>åˆ›å»ºä¸€ä¸ª <code>docs/company_policy.txt</code>ï¼š</p>
<pre><code>å…¬å¸é€€è´§æ”¿ç­–ï¼ˆ2024å¹´æ›´æ–°ï¼‰ï¼š

1. æ— ç†ç”±é€€è´§ï¼šè‡ªè´­ä¹°ä¹‹æ—¥èµ·7å¤©å†…å¯ç”³è¯·æ— ç†ç”±é€€è´§
2. è´¨é‡é—®é¢˜é€€è´§ï¼šå‘ç°è´¨é‡é—®é¢˜å¯åœ¨30å¤©å†…ç”³è¯·é€€è´§
3. é€€è´§æµç¨‹ï¼š
   - ç™»å½•å®˜ç½‘æäº¤é€€è´§ç”³è¯·
   - å®¢æœå®¡æ ¸é€šè¿‡åå¯„å›å•†å“
   - ä»“åº“éªŒæ”¶å3ä¸ªå·¥ä½œæ—¥å†…é€€æ¬¾
4. ç‰¹æ®Šå•†å“ï¼šå®šåˆ¶ç±»å•†å“ä¸æ”¯æŒé€€è´§
</code></pre>
<h2>å®æ“æ¡ˆä¾‹ï¼šä¼ä¸šçŸ¥è¯†åº“é—®ç­”</h2>
<h3>å®Œæ•´ä»£ç å®ç°</h3>
<pre><code class="language-python">import os
from dotenv import load_dotenv
from langchain_openai import OpenAIEmbeddings, ChatOpenAI
from langchain.vectorstores import Chroma
from langchain.text_splitter import CharacterTextSplitter
from langchain.chains import RetrievalQA

# åŠ è½½ç¯å¢ƒå˜é‡
load_dotenv()

# 1. å‡†å¤‡æ–‡æ¡£
def load_documents():
    &quot;&quot;&quot;åŠ è½½æ–‡æ¡£å¹¶åˆ†å‰²æˆå—&quot;&quot;&quot;
    # è¯»å–æ–‡æ¡£
    with open(&#39;docs/company_policy.txt&#39;, &#39;r&#39;, encoding=&#39;utf-8&#39;) as f:
        text = f.read()
    
    # æ–‡æœ¬åˆ†å‰²
    text_splitter = CharacterTextSplitter(
        separator=&quot;\n&quot;,
        chunk_size=200,
        chunk_overlap=50,
        length_function=len
    )
    
    chunks = text_splitter.split_text(text)
    return chunks

# 2. åˆ›å»ºå‘é‡æ•°æ®åº“
def create_vector_store(chunks):
    &quot;&quot;&quot;åˆ›å»ºå‘é‡æ•°æ®åº“&quot;&quot;&quot;
    # ä½¿ç”¨OpenAIçš„Embeddingæ¨¡å‹
    embeddings = OpenAIEmbeddings()
    
    # åˆ›å»ºChromaå‘é‡æ•°æ®åº“
    vector_store = Chroma.from_texts(
        texts=chunks,
        embedding=embeddings,
        persist_directory=&quot;./chroma_db&quot;
    )
    
    # æŒä¹…åŒ–å­˜å‚¨
    vector_store.persist()
    return vector_store

# 3. æ„å»ºRAGé—®ç­”é“¾
def create_qa_chain(vector_store):
    &quot;&quot;&quot;åˆ›å»ºé—®ç­”é“¾&quot;&quot;&quot;
    # åˆå§‹åŒ–LLM
    llm = ChatOpenAI(
        model_name=&quot;gpt-3.5-turbo&quot;,
        temperature=0
    )
    
    # åˆ›å»ºæ£€ç´¢å™¨
    retriever = vector_store.as_retriever(
        search_kwargs={&quot;k&quot;: 2}  # è¿”å›æœ€ç›¸å…³çš„2ä¸ªæ–‡æ¡£
    )
    
    # æ„å»ºRAGé“¾
    qa_chain = RetrievalQA.from_chain_type(
        llm=llm,
        chain_type=&quot;stuff&quot;,
        retriever=retriever,
        return_source_documents=True  # è¿”å›å‚è€ƒæ–‡æ¡£
    )
    
    return qa_chain

# 4. ä¸»ç¨‹åº
def main():
    print(&quot;ğŸš€ æ­£åœ¨åˆå§‹åŒ–RAGç³»ç»Ÿ...&quot;)
    
    # åŠ è½½æ–‡æ¡£
    chunks = load_documents()
    print(f&quot;âœ… æ–‡æ¡£å·²åˆ†å‰²ä¸º {len(chunks)} ä¸ªç‰‡æ®µ&quot;)
    
    # åˆ›å»ºå‘é‡æ•°æ®åº“
    vector_store = create_vector_store(chunks)
    print(&quot;âœ… å‘é‡æ•°æ®åº“åˆ›å»ºå®Œæˆ&quot;)
    
    # åˆ›å»ºé—®ç­”é“¾
    qa_chain = create_qa_chain(vector_store)
    print(&quot;âœ… RAGé—®ç­”é“¾å·²å°±ç»ª\n&quot;)
    
    # äº¤äº’å¼é—®ç­”
    while True:
        question = input(&quot;\nğŸ“ è¯·è¾“å…¥é—®é¢˜ (è¾“å…¥&#39;quit&#39;é€€å‡º): &quot;)
        
        if question.lower() == &#39;quit&#39;:
            break
        
        # æ‰§è¡Œé—®ç­”
        result = qa_chain.invoke({&quot;query&quot;: question})
        
        print(&quot;\n&quot; + &quot;=&quot;*50)
        print(f&quot;ğŸ¤– å›ç­”:\n{result[&#39;result&#39;]}&quot;)
        print(&quot;=&quot;*50)
        
        # æ˜¾ç¤ºå‚è€ƒæ¥æº
        if result.get(&#39;source_documents&#39;):
            print(&quot;\nğŸ“š å‚è€ƒæ¥æº:&quot;)
            for i, doc in enumerate(result[&#39;source_documents&#39;], 1):
                print(f&quot;  [{i}] {doc.page_content[:100]}...&quot;)

if __name__ == &quot;__main__&quot;:
    main()
</code></pre>
<h3>è¿è¡Œæµ‹è¯•</h3>
<pre><code class="language-bash">python rag_demo.py
</code></pre>
<p>ç¤ºä¾‹äº¤äº’ï¼š</p>
<pre><code>ğŸš€ æ­£åœ¨åˆå§‹åŒ–RAGç³»ç»Ÿ...
âœ… æ–‡æ¡£å·²åˆ†å‰²ä¸º 3 ä¸ªç‰‡æ®µ
âœ… å‘é‡æ•°æ®åº“åˆ›å»ºå®Œæˆ
âœ… RAGé—®ç­”é“¾å·²å°±ç»ª

ğŸ“ è¯·è¾“å…¥é—®é¢˜ (è¾“å…¥&#39;quit&#39;é€€å‡º): é€€è´§æœŸé™æ˜¯å¤šä¹…ï¼Ÿ

==================================================
ğŸ¤– å›ç­”:
æ ¹æ®å…¬å¸é€€è´§æ”¿ç­–ï¼Œé€€è´§æœŸé™åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼š
1. æ— ç†ç”±é€€è´§ï¼šè‡ªè´­ä¹°ä¹‹æ—¥èµ·7å¤©å†…å¯ç”³è¯·
2. è´¨é‡é—®é¢˜é€€è´§ï¼šå¯åœ¨30å¤©å†…ç”³è¯·é€€è´§
==================================================

ğŸ“š å‚è€ƒæ¥æº:
  [1] å…¬å¸é€€è´§æ”¿ç­–ï¼ˆ2024å¹´æ›´æ–°ï¼‰ï¼š1. æ— ç†ç”±é€€è´§ï¼šè‡ªè´­ä¹°ä¹‹æ—¥èµ·7å¤©å†…å¯ç”³è¯·æ— ç†ç”±é€€è´§...
  [2] 2. è´¨é‡é—®é¢˜é€€è´§ï¼šå‘ç°è´¨é‡é—®é¢˜å¯åœ¨30å¤©å†…ç”³è¯·é€€è´§...
</code></pre>
<h2>ä¼˜åŒ–æŠ€å·§</h2>
<h3>1. æ–‡æœ¬åˆ†å—ç­–ç•¥</h3>
<pre><code class="language-python">from langchain.text_splitter import RecursiveCharacterTextSplitter

# é€’å½’åˆ†å—ï¼Œæ›´æ™ºèƒ½
splitter = RecursiveCharacterTextSplitter(
    chunk_size=500,
    chunk_overlap=100,
    separators=[&quot;\n\n&quot;, &quot;\n&quot;, &quot;ã€‚&quot;, &quot; &quot;, &quot;&quot;]
)
</code></pre>
<h3>2. æ··åˆæ£€ç´¢</h3>
<p>ç»“åˆå…³é”®è¯æ£€ç´¢å’Œå‘é‡æ£€ç´¢ï¼š</p>
<pre><code class="language-python">from langchain.retrievers import BM25Retriever, EnsembleRetriever

# BM25å…³é”®è¯æ£€ç´¢
bm25_retriever = BM25Retriever.from_documents(documents)
bm25_retriever.k = 2

# å‘é‡æ£€ç´¢
vector_retriever = vector_store.as_retriever(search_kwargs={&quot;k&quot;: 2})

# æ··åˆæ£€ç´¢ï¼ˆæƒé‡å¯è°ƒæ•´ï¼‰
ensemble_retriever = EnsembleRetriever(
    retrievers=[bm25_retriever, vector_retriever],
    weights=[0.5, 0.5]
)
</code></pre>
<h3>3. é‡æ’åºä¼˜åŒ–</h3>
<pre><code class="language-python">from langchain.retrievers import ContextualCompressionRetriever
from langchain.retrievers.document_compressors import LLMChainExtractor

# ä½¿ç”¨LLMå¯¹æ£€ç´¢ç»“æœé‡æ–°æ’åº
compressor = LLMChainExtractor.from_llm(llm)
compression_retriever = ContextualCompressionRetriever(
    base_compressor=compressor,
    base_retriever=retriever
)
</code></pre>
<h3>4. æç¤ºè¯å·¥ç¨‹</h3>
<pre><code class="language-python">from langchain.prompts import PromptTemplate

custom_prompt = &quot;&quot;&quot;åŸºäºä»¥ä¸‹ä¸Šä¸‹æ–‡å›ç­”é—®é¢˜ã€‚å¦‚æœä¸Šä¸‹æ–‡ä¸­æ²¡æœ‰ç›¸å…³ä¿¡æ¯ï¼Œè¯·æ˜ç¡®è¯´æ˜ã€‚

ä¸Šä¸‹æ–‡ï¼š
{context}

é—®é¢˜ï¼š{question}

è¯·æä¾›è¯¦ç»†ä¸”å‡†ç¡®çš„å›ç­”ï¼š&quot;&quot;&quot;

PROMPT = PromptTemplate(
    template=custom_prompt,
    input_variables=[&quot;context&quot;, &quot;question&quot;]
)

qa_chain = RetrievalQA.from_chain_type(
    llm=llm,
    chain_type=&quot;stuff&quot;,
    retriever=retriever,
    chain_type_kwargs={&quot;prompt&quot;: PROMPT}
)
</code></pre>
<h2>æ€»ç»“</h2>
<p>æœ¬ç¯‡æ–‡ç« è¯¦ç»†ä»‹ç»äº† <strong>RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰</strong> æŠ€æœ¯çš„æ ¸å¿ƒæ¦‚å¿µã€å·¥ä½œåŸç†å’Œå®è·µæ–¹æ³•ã€‚</p>
<h3>é‡ç‚¹å›é¡¾</h3>
<table>
<thead>
<tr>
<th>è¦ç‚¹</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td><strong>ä»€ä¹ˆæ˜¯RAG</strong></td>
<td>å°†å¤–éƒ¨çŸ¥è¯†æ£€ç´¢ä¸LLMç”Ÿæˆç›¸ç»“åˆçš„æŠ€æœ¯æ¶æ„</td>
</tr>
<tr>
<td><strong>ä¸ºä»€ä¹ˆéœ€è¦</strong></td>
<td>è§£å†³LLMçŸ¥è¯†æˆªæ­¢å’Œå¹»è§‰é—®é¢˜</td>
</tr>
<tr>
<td><strong>å·¥ä½œåŸç†</strong></td>
<td>æ–‡æ¡£é¢„å¤„ç† â†’ å‘é‡åŒ–å­˜å‚¨ â†’ ç›¸ä¼¼åº¦æ£€ç´¢ â†’ ä¸Šä¸‹æ–‡ç”Ÿæˆ</td>
</tr>
<tr>
<td><strong>æ ¸å¿ƒç»„ä»¶</strong></td>
<td>Embeddingæ¨¡å‹ã€å‘é‡æ•°æ®åº“ã€LLMã€æ£€ç´¢å™¨</td>
</tr>
</tbody></table>
<h3>è¿›é˜¶æ–¹å‘</h3>
<ol>
<li><strong>å¤šæ¨¡æ€RAG</strong>ï¼šæ”¯æŒå›¾ç‰‡ã€PDFã€è¡¨æ ¼ç­‰å¤šç§æ–‡æ¡£ç±»å‹</li>
<li><strong>Agentic RAG</strong>ï¼šè®©RAGå…·å¤‡è‡ªä¸»å†³ç­–èƒ½åŠ›ï¼Œå¯å¤šæ¬¡æ£€ç´¢</li>
<li><strong>Graph RAG</strong>ï¼šç»“åˆçŸ¥è¯†å›¾è°±è¿›è¡Œæ›´å¤æ‚çš„æ¨ç†</li>
<li><strong>æœ¬åœ°éƒ¨ç½²</strong>ï¼šä½¿ç”¨Ollamaç­‰å·¥å…·å®ç°å®Œå…¨ç§æœ‰åŒ–</li>
</ol>
<hr>
<p><em>æœ¬æ–‡ç”±AIè‡ªåŠ¨ç”Ÿæˆï¼Œæ¯æ—¥æ›´æ–°AIæŠ€æœ¯æ•™ç¨‹ã€‚å¦‚æœ‰ç–‘é—®æ¬¢è¿ç•™è¨€äº¤æµï¼</em></p>

        </div>
    </article>

    <!-- åˆ†äº«åŒºåŸŸ -->
    <section style="background: var(--bg-secondary); padding: 3rem 0;">
        <div class="container">
            <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem;">
                <div>
                    <h3>å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Ÿ</h3>
                    <p style="color: var(--text-secondary);">åˆ†äº«ç»™æ›´å¤šå¼€å‘è€…</p>
                </div>
                <div style="display: flex; gap: 1rem;">
                    <button class="btn btn-secondary"><i class="fab fa-twitter"></i><span>Twitter</span></button>
                    <button class="btn btn-secondary"><i class="fab fa-weixin"></i><span>å¾®ä¿¡</span></button>
                </div>
            </div>
        </div>
    </section>

    <!-- ç›¸å…³æ–‡ç« å ä½ -->
    <section class="featured-section">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">æ›´å¤šæ–‡ç« </h2>
            </div>
            <div class="section-footer">
                <a href="/posts.html" class="btn btn-outline"><span>æŸ¥çœ‹å…¨éƒ¨æ–‡ç« </span><i class="fas fa-arrow-right"></i></a>
            </div>
        </div>
    </section>

    <footer class="footer">
        <div class="container">
            <div class="footer-bottom">
                <p>&copy; 2026 TechBlog. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="/js/main.js"></script>
</body>
</html>